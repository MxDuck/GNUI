local httpget = require("httpget")
--https://raw.githubusercontent.com/lua-gods/GNUI/main/icon.png?token=GHSAT0AAAAAACLVF2C7GQXZWUGX6LBJ3ILKZMBROPA

local body = data:createBuffer()

local function requestPOST(link,body)
   
end

local params = ([[
api_dev_key            = cC7A3U0ro_Wg2B1pYGHcM3BfX6gfrL2x
&api_option            = paste
&api_paste_private     = 0
&api_paste_name        = test
&api_paste_expire_date = 10M
&api_paste_code        = random
&api_user_key          = 
]])
   :gsub("\n","") -- remove linebreaks
   :gsub(" ","") -- remove spaces

body:writeString(params)
body:setPosition(0)
local request = net.http:request("https://pastebin.com/api/api_post.php")
request:method("POST")
request:header("Content-Type","application/x-www-form-urlencoded")
request:body(body)

local result = request:send()

events.WORLD_TICK:register(function ()
   if result:isDone() then
      local value = result:getValue()
      if value then
         local anotherfuckingbuffer = data:createBuffer()
         anotherfuckingbuffer:readFromStream(value:getData())
         anotherfuckingbuffer:setPosition(0)
         print(anotherfuckingbuffer:readString())
      end
      
      events.WORLD_TICK:remove("wait")
   end
end,"wait")